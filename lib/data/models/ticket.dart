import 'package:online_ticked/core/constants/ticket_state.dart';import 'package:online_ticked/util/extension.dart';class Ticket{  String id;  String title;  String description;  DateTime createdAt;  DateTime finishedAt;  DateTime? usedAt;  TicketState state;  double price;  Ticket({    required this.id,    required this.title,    required this.description,    required this.createdAt,    required this.finishedAt,    required this.price,    this.usedAt,    this.state = TicketState.ready,  });  factory Ticket.fromMap(Map<String, dynamic> map) {    final finishedAt = DateTime.parse(map['finishedAt']);    if (DateTime.now().isAfter(finishedAt) && DateTime.now().dateNow != finishedAt) {      map['state'] = 'expired';    }    return Ticket(      id: map['id'],      title: map['title'],      price: double.parse((map['price']??0).toString()),      description: map['description'],      createdAt: DateTime.parse(map['createdAt']),      finishedAt: DateTime.parse(map['finishedAt']),      usedAt: map['usedAt'] != null ? DateTime.parse(map['usedAt']) : null,      state: TicketState.fromName(map['state'] as String? ?? 'ready'),    );  }  Map<String, dynamic> toMap() {    return {      'id': id,      'title': title,      'description': description,      'createdAt': createdAt.toIso8601String(),      'finishedAt': finishedAt.toIso8601String(),      'state': state.name,      'usedAt': usedAt?.toIso8601String(),      'price': price,    };  }}