import 'package:flutter/material.dart';import 'package:flutter_bloc/flutter_bloc.dart';import 'package:go_router/go_router.dart';import 'package:online_ticked/core/constants/app_asets.dart';import 'package:online_ticked/core/constants/app_route_names.dart';import 'package:online_ticked/provider/auth_cubit.dart';import 'package:online_ticked/util/extension.dart';import 'login_page_mixin.dart';/// LoginPage ekranıclass LoginPage extends StatefulWidget {  /// LoginPage ekranı  const LoginPage({super.key});  @override  State<LoginPage> createState() => _LoginPageState();}class _LoginPageState extends State<LoginPage> with LoginPageMixin{  @override  Widget build(BuildContext context) {    Size size = MediaQuery.of(context).size;    final cubit = context.read<AuthCubit>();    return Scaffold(     // backgroundColor: Theme.of(context).colorScheme.primary,      body: isLoading?          Column(            mainAxisAlignment: MainAxisAlignment.center,            children:  [              Image.asset(                AppAsets.logo.value,                width: 300,              ),             const  Center(                child: CircularProgressIndicator(),              ),            ],          )          :  Row(        children: [          Expanded(            child: Container(              width: context.isMobile                  ? size.width                  : context.isTablet                  ? size.width * 0.9                  : context.width * 0.5,              height: size.height,              decoration: BoxDecoration(                color: context.theme.scaffoldBackgroundColor,                boxShadow: const [                  BoxShadow(                    color: Colors.black,                    blurRadius: 20.0,                    spreadRadius: 0.0,                    offset: Offset(0.0, 0.0), // shadow direction: bottom right                  )                ],              ),              child: Center(                child: SingleChildScrollView(                  child: SizedBox(                    width: context.isMobile                        ? size.width                        : context.isTablet                        ? size.width * 0.9                        : context.width * .4,                    child: Column(                      children: [                        Align(                          alignment: Alignment.center,                          child: Image.asset(                            AppAsets.logo.value,                            width:                            context.isDesktop ? 300 : context.width * 0.5,                          ),                        ),                        SizedBox(                          height: context.height * 0.2,                        ),                        Padding(                          padding: const EdgeInsets.all(6.0),                          child: Text(                            "Giriş Yap",                            style: context.textTheme.headlineMedium                                ?.copyWith(fontWeight: FontWeight.bold),                          ),                        ),                        Padding(                          padding: const EdgeInsets.all(15),                          child: TextFormField(                            controller: cubit.email,                            keyboardType: TextInputType.emailAddress,                            textInputAction: TextInputAction.next,                            decoration: InputDecoration(                              labelText: "Kullanıcı Adı",                            ),                          ),                        ),                        SizedBox(                          height: 10,                        ),                        Padding(                          padding: const EdgeInsets.only(right: 15, left: 15),                          child: TextField(                            controller: cubit.password,                            keyboardType: TextInputType.visiblePassword,                            obscureText: true,                            onSubmitted: (value) {                              context.read<AuthCubit>().signIn();                            },                            decoration: InputDecoration(                              labelText: "Şifre",                              alignLabelWithHint: true,                            ),                          ),                        ),                        const SizedBox(                          height: 10,                        ),                        Row(                          mainAxisAlignment: MainAxisAlignment.spaceBetween,                          children: [                            Padding(                              padding:                              const EdgeInsets.symmetric(horizontal: 15),                              child: TextButton(                                onPressed: () {                                /*  Navigator.push(                                      context,                                      MaterialPageRoute(                                          builder: (context) =>                                          const ForgotPassPage()));*/                                },                                child: Text(                                  "Şifremi Unuttum...",                                  style: TextStyle(                                      fontSize: 15,                                      color: Theme.of(context)                                          .colorScheme                                          .primary),                                ),                              ),                            ),                          ],                        ),                        const SizedBox(                          height: 30,                        ),                        Padding(                          padding: const EdgeInsets.symmetric(horizontal: 15),                          child: InkWell(                            onTap: context.read<AuthCubit>().signIn,                            child: Container(                              decoration: BoxDecoration(                                color: Theme.of(context).colorScheme.primary,                                borderRadius: BorderRadius.circular(5),                              ),                              child: BlocConsumer<AuthCubit,AuthState>(                                  listener: (context, state) {                                    if (state is AuthError) {                                      print(state.mesaage);                                      ScaffoldMessenger.of(context).showSnackBar(                                          SnackBar(                                              content: Text(state.mesaage.toString())));                                    }                                    if (state is AuthAuthenticated) {                                      context.go(AppRouteName.dashboard.path);                                    }                                  },                                  builder: (context,state ) {                                    if (state is AuthLoading) {                                      return  Padding(                                        padding:const  EdgeInsets.all(8.0),                                        child: Center(                                          child: CircularProgressIndicator(color: context.colorScheme.background,),                                        ),                                      );                                    }                                    return Padding(                                      padding: const EdgeInsets.all(8.0),                                      child: Center(                                        child: Text(                                          "Giriş yap",                                          style: TextStyle(                                              fontSize: 20,                                              color: Colors.white,                                              fontWeight: FontWeight.bold),                                        ),                                      ),                                    );                                  }                              ),                            ),                          ),                        ),                      ],                    ),                  ),                ),              ),            ),          ),          if (!context.isMobile)            Expanded(              child: Container(                  height: size.height,                  decoration: BoxDecoration(                    color: Theme.of(context).colorScheme.primary,                  ),                  child: Center(                    child: Image.asset(                      AppAsets.loginBackground.value,                      width: context.width,                    ),                  )),            ),        ],      ),    );  }}